---
import BlogCard from "@/components/ui/cards/blog-card.astro";
import GradientHead from "@/components/ui/gradient-head.astro";
import RoundedNav from "@/components/ui/nav/rounded-nav.astro";
import NoData from "@/components/ui/placeholders/no-data.astro";
import Seperator from "@/components/ui/seperator.astro";
import MainWrapper from "@/components/working-groups/Main-Wrapper.astro";
import MainLayout from "@/layouts/MainLayout.astro";
import { getCollection } from "astro:content";
// import Meetings from "@/components/calenders/Meetings";
export async function getStaticPaths() {
  const groups = await getCollection("Working_Groups");
  const wb = groups.filter((group) => group.data.type === "wg");
  return wb.map((group) => {
    const contributions = groups
      .filter((group) => group.data.type === "contribution")
      .filter((project) => project.slug.split("/")[0] === group.slug);
    return {
      params: {
        slug: group.slug,
      },
      props: {
        group,

        contributions,
      },
    };
  });
}

const {
  group: { data, slug, render },
  contributions,
} = Astro.props;
---

<MainWrapper data={data} slug={slug} className="p-3 md:p-4">
  {
    contributions.length === 0 && (
      <NoData>
        Currently there are no contributions in this working group
      </NoData>
    )
  }
  <ul class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
    {
      contributions.map(({ data, slug: subSlug }) => (
        <BlogCard
          blog={data}
          radius="inner"
          link={`/working-groups/${subSlug}`}
        />
      ))
    }
  </ul>
</MainWrapper>
